-- ddl.sql (H2 2.x compatible)

CREATE TABLE IF NOT EXISTS AUTOR (
                                     ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
                                     NOMBRE VARCHAR(200) NOT NULL,
                                     PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS GENERO (
                                      ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
                                      NOMBRE VARCHAR(100) NOT NULL,
                                      PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS LIBRO (
                                     ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
                                     TITULO VARCHAR(300) NOT NULL,
                                     AUTOR_ID BIGINT NOT NULL,
                                     ESTADO VARCHAR(255) NOT NULL,
                                     PRIMARY KEY (ID),
                                     CONSTRAINT FK_LIBRO_AUTOR FOREIGN KEY (AUTOR_ID) REFERENCES AUTOR(ID)
);

CREATE TABLE IF NOT EXISTS LIBRO_GENERO (
                                            LIBRO_ID BIGINT NOT NULL,
                                            GENERO_ID BIGINT NOT NULL,
                                            CONSTRAINT PK_LIBRO_GENERO PRIMARY KEY (LIBRO_ID, GENERO_ID),
                                            CONSTRAINT FK_LG_LIBRO  FOREIGN KEY (LIBRO_ID)  REFERENCES LIBRO(ID),
                                            CONSTRAINT FK_LG_GENERO FOREIGN KEY (GENERO_ID) REFERENCES GENERO(ID)
);
